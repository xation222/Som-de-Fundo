<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="imagens/icone.ico" type="image/x-icon">
    <title>Som de Fundo</title>
    <link rel="stylesheet" href="style.css" media="all">
</head>
<body id="corpo">
    <header id="texto-muda-cor">
        <h1>Personalize Seu Ambiente Sonoro</h1>
        <p>Click nos icones para ouvir o som, misture, combine, desfrute.</p>
    </header>
    <main>
        <section class="botoes">
            <div class="botao">
                <img src="imagens/chuva.png" id="chuvabotao" class="imagem"></img>
                <input type="range" id="chuvarange" class="range">
            </div>
            <div class="botao">
                <img src="imagens/vento.png" id="ventobotao" class="imagem"></img>
                <input type="range" id="ventorange" class="range">
            </div>
        </section>
        <section class="botoes">
            <div class="botao">
                <img src="imagens/ondas.png" id="ondasbotao" class="imagem"></img>
                <input type="range" id="ondasrange" class="range">
            </div>
            <div class="botao">
                <img src="imagens/trovao.png" id="trovaobotao" class="imagem"></img>
                <input type="range" id="trovaorange" class="range">
            </div>
        </section>
        <section id="entradadeaudio">
                <audio 
                    id="chuva" 
                    src="audios/chuva.mp3" 
                    controls="controls" 
                    loop="loop" 
                    autoplay="autoplay" 
                    muted="muted">
                </audio>
                <audio 
                    id="vento" 
                    src="audios/vento.mp3" 
                    controls="controls" 
                    loop="loop" 
                    autoplay="autoplay" 
                    muted="muted">
                </audio>
                <audio 
                    id="ondas" 
                    src="audios/ondas.mp3" 
                    controls="controls" 
                    loop="loop" 
                    autoplay="autoplay" 
                    muted="muted">
                </audio>
                <audio 
                    id="trovao" 
                    src="audios/trovao.mp3" 
                    controls="controls" 
                    loop="loop" 
                    autoplay="autoplay" 
                    muted="muted">
                </audio>
        </section>
    </main>
    <script>
// declaração de variáveis
const chuvabotao = document.querySelector("#chuvabotao");
const chuva = document.querySelector('audio#chuva');
const ventobotao = document.querySelector("#ventobotao");
const vento = document.querySelector("#vento");
const ondasbotao = document.querySelector('#ondasbotao');
const ondas = document.querySelector('#ondas');
const trovaobotao = document.querySelector('#trovaobotao');
const trovao = document.querySelector('#trovao');
const corpo = document.getElementById("corpo");
const textomudacor = document.getElementById("texto-muda-cor");
const classeIMG = document.querySelectorAll(".imagem");
var botaoativo = 0;

// evento de click
document.addEventListener('click', e => {
    if (e.target == chuvabotao) {
        if (chuva.muted == false) {
            chuva.muted = true;
            chuvabotao.style.opacity = "50%";
            chuvarange.style.display = 'none';
            botaoativo -= 1;
        }
        else {
            chuva.muted = false;
            chuvabotao.style.opacity = "100%";
            chuvarange.style.display = 'grid';
            botaoativo += 1;
        }
    }
    if (e.target == ventobotao) {
        if (vento.muted == false) {
            vento.muted = true;
            ventobotao.style.opacity = "50%";
            ventorange.style.display = 'none';
            botaoativo -= 1;
        }
        else {
            vento.muted = false;
            ventobotao.style.opacity = "100%";
            ventorange.style.display = 'grid';
            botaoativo += 1;
        }
    }
    if (e.target == ondasbotao) {
        if (ondas.muted == false) {
            ondas.muted = true;
            ondasbotao.style.opacity = "50%";
            ondasrange.style.display = 'none';
            botaoativo -= 1;
        }
        else {
            ondas.muted = false;
            ondasbotao.style.opacity = "100%";
            ondasrange.style.display = 'grid';
            botaoativo += 1;
        }
    }
    if (e.target == trovaobotao) {
        if (trovao.muted == false) {
            trovao.muted = true;
            trovaobotao.style.opacity = "50%";
            trovaorange.style.display = 'none';
            botaoativo -= 1;
        }
        else {
            trovao.muted = false;
            trovaobotao.style.opacity = "100%";
            trovaorange.style.display = 'grid';
            botaoativo += 1;
        }
    }
    if (botaoativo == 1) {
        if (chuva.muted == false) {
            corpo.style.backgroundColor = "#92c4e9";
        }
        if (vento.muted == false) {
            corpo.style.backgroundColor = "#79eac7";
        }
        if (ondas.muted == false) {
            corpo.style.backgroundColor = "#7994ea";
        }
        if (trovao.muted == false) {
            corpo.style.backgroundColor = "#8b5ea5";
        }
    }
    if (botaoativo == 0) {
        corpo.style.backgroundColor = "aliceblue";
        textomudacor.style.color = "black";
    }
    if (botaoativo == 2) {
        corpo.style.backgroundColor = "#596b62";
        textomudacor.style.color = "black";
    }
    if (botaoativo == 3)
    {
        corpo.style.backgroundColor = "#30464b";
        textomudacor.style.color = "black";
        for (var i = 0; i < classeIMG.length; i++) {
            classeIMG[i].style.backgroundColor = "rgba(240, 248, 255, 0.0";
            classeIMG[i].style.boxShadow = "none";
        }
    }
    if (botaoativo == 4)
    {
        corpo.style.backgroundColor = "#000b1d";
        textomudacor.style.color = "aliceblue";
        for (var i = 0; i < classeIMG.length; i++) {
            classeIMG[i].style.backgroundColor = "rgba(240, 248, 255, 0.4";
            classeIMG[i].style.boxShadow = "inset 0 0 10px white, 0 0 10px white";
        }
    }
})

// evento de volume
document.addEventListener('mousemove', e=> {
    chuva.volume = chuvarange.value/100;
    vento.volume = ventorange.value/100;
    ondas.volume = ondasrange.value/100;
    trovao.volume = trovaorange.value/100;
})

// touchscreen
const rangeInput = document.querySelectorAll('.range');


for (let i = 0; i < rangeInput.length; i++) {

    rangeInput[i].addEventListener('touchstart', function(e) {
    e.preventDefault();
}, { passive: true });

    rangeInput[i].addEventListener('touchmove', function(e) {
    const touch = e.touches[0];
    const value = (touch.clientX - rangeInput[i].getBoundingClientRect().left) / rangeInput[i].offsetWidth * 100;
    rangeInput[i].value = value;

    chuva.volume = chuvarange.value/100;
    vento.volume = ventorange.value/100;
    ondas.volume = ondasrange.value/100;
    trovao.volume = trovaorange.value/100;
})}

    </script>
</body>
</html>